{"version":3,"file":"static/chunks/pages/audio-2a799e0c4b8ba9a7.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,SACA,WACA,OAAeC,EAAQ,KACvB,EACA,6HC0EAC,CAAAA,EAAA,QAAeC,CAAAA,EAAAA,EAAAA,EAAAA,EArEf,WACI,GAAM,CAACC,EAAWC,EAAa,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAA8BC,KAAAA,GAC1DC,EAA0BC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,UACxC,IAAMC,EAAYC,EAAAA,YAAYA,CAACC,MAAM,CAC/BA,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACrCP,EAAaS,GAAW,EAC5B,EAAG,EAAE,EAECE,EAAoBP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,UAClC,IAAMC,EAAYC,EAAAA,YAAYA,CAACC,MAAM,CAC/BA,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACjCE,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBL,EAAQ,GAC9B,MAAMM,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBN,GAC5B,EAAG,EAAE,EACCO,EAAqBV,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,UACnC,IAAMC,EAAYC,EAAAA,YAAYA,CAACC,MAAM,CAC/BA,EAASF,EAAUG,GAAG,CACtBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeH,GACjCE,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBL,EAAQ,GAC9B,MAAMM,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBN,GAC5B,EAAG,EAAE,SAEL,EACKD,YAAYA,CAACC,MAAM,EAClBD,EAAAA,YAAYA,CAACC,MAAM,YAAYQ,EAAAA,EAAoB,CAQrD,GAAAC,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAC,IAAA,EAACC,MAAAA,WAAI,aACU,IACVnB,KAAcG,IAAdH,EAA0B,UAAYA,EAAY,MAAQ,QAE/D,GAAAiB,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAG,GAAA,EAACC,EAAAA,CAAaA,CAAAA,CACVC,SAAU,CAACf,EAAAA,YAAYA,CAACC,MAAM,CAC9Be,QAASnB,WACZ,kBAGD,GAAAa,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACtB,EACXuB,QAASX,WACZ,WAGD,GAAAK,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACtB,EACXuB,QAASR,WACZ,kBA1BL,GAAAE,EAAAG,GAAA,EAACD,MAAAA,UAAI,0DAgCjB","sources":["webpack://_N_E/?defd","webpack://_N_E/./src/pages/audio.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/audio\",\n      function () {\n        return require(\"private-next-pages/audio.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/audio\"])\n      });\n    }\n  ","import { DefaultButton, PrimaryButton } from \"@fluentui/react\";\nimport { AdbDaemonWebUsbDevice } from \"@yume-chan/adb-daemon-webusb\";\nimport {\n    aoaGetProtocol,\n    aoaSetAudioMode,\n    aoaStartAccessory,\n} from \"@yume-chan/aoa\";\nimport { observer } from \"mobx-react-lite\";\nimport { useCallback, useState } from \"react\";\nimport { GLOBAL_STATE } from \"../state\";\n\nfunction AudioPage() {\n    const [supported, setSupported] = useState<boolean | undefined>(undefined);\n    const handleQuerySupportClick = useCallback(async () => {\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\n        const device = transport.raw;\n        const version = await aoaGetProtocol(device);\n        setSupported(version >= 2);\n    }, []);\n\n    const handleEnableClick = useCallback(async () => {\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\n        const device = transport.raw;\n        const version = await aoaGetProtocol(device);\n        if (version < 2) {\n            return;\n        }\n        await aoaSetAudioMode(device, 1);\n        await aoaStartAccessory(device);\n    }, []);\n    const handleDisableClick = useCallback(async () => {\n        const transport = GLOBAL_STATE.device as AdbDaemonWebUsbDevice;\n        const device = transport.raw;\n        const version = await aoaGetProtocol(device);\n        if (version < 2) {\n            return;\n        }\n        await aoaSetAudioMode(device, 0);\n        await aoaStartAccessory(device);\n    }, []);\n\n    if (\n        !GLOBAL_STATE.device ||\n        !(GLOBAL_STATE.device instanceof AdbDaemonWebUsbDevice)\n    ) {\n        return (\n            <div>Audio forward can only be used with WebUSB connection.</div>\n        );\n    }\n\n    return (\n        <div>\n            <div>\n                Supported:{\" \"}\n                {supported === undefined ? \"Unknown\" : supported ? \"Yes\" : \"No\"}\n            </div>\n            <div>\n                <PrimaryButton\n                    disabled={!GLOBAL_STATE.device}\n                    onClick={handleQuerySupportClick}\n                >\n                    Query Support\n                </PrimaryButton>\n                <DefaultButton\n                    disabled={!supported}\n                    onClick={handleEnableClick}\n                >\n                    Enable\n                </DefaultButton>\n                <DefaultButton\n                    disabled={!supported}\n                    onClick={handleDisableClick}\n                >\n                    Disable\n                </DefaultButton>\n            </div>\n        </div>\n    );\n}\n\nexport default observer(AudioPage);\n"],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","observer","supported","setSupported","useState","undefined","handleQuerySupportClick","useCallback","transport","GLOBAL_STATE","device","raw","version","aoaGetProtocol","handleEnableClick","aoaSetAudioMode","aoaStartAccessory","handleDisableClick","AdbDaemonWebUsbDevice","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","jsx","PrimaryButton","disabled","onClick","DefaultButton"],"sourceRoot":""}