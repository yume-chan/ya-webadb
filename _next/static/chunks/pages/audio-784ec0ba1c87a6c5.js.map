{"version":3,"file":"static/chunks/pages/audio-784ec0ba1c87a6c5.js","mappings":"oFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,SACA,WACA,OAAeC,EAAQ,KACvB,EACA,+HCwEAC,CAAAA,EAAA,QAAeC,CAAAA,EAAAA,EAAAA,EAAAA,EAnEf,UAAqB,CACjB,GAAM,CAACC,EAAWC,EAAa,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAA8BC,KAAAA,GAC1DC,EAA0BC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CACpD,IAAMC,EAAUC,EAAAA,CAAAA,CAAAA,OAAoB,CAC9BC,EAASF,EAAQE,MAAM,CACvBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeF,GACrCP,EAAaQ,GAAW,EAC5B,EAAG,EAAE,EAECE,EAAoBN,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CAC9C,IAAMC,EAAUC,EAAAA,CAAAA,CAAAA,OAAoB,CAC9BC,EAASF,EAAQE,MAAM,CACvBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeF,GACjCC,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBJ,EAAQ,GAC9B,MAAMK,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBL,GAC5B,EAAG,EAAE,EACCM,EAAqBT,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,SAAY,CAC/C,IAAMC,EAAUC,EAAAA,CAAAA,CAAAA,OAAoB,CAC9BC,EAASF,EAAQE,MAAM,CACvBC,EAAU,MAAMC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeF,GACjCC,EAAU,IAGd,MAAMG,CAAAA,EAAAA,EAAAA,EAAAA,EAAgBJ,EAAQ,GAC9B,MAAMK,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBL,GAC5B,EAAG,EAAE,SAEL,EACKD,CAAAA,CAAAA,OAAoB,EACnBA,EAAAA,CAAAA,CAAAA,OAAoB,YAAYQ,EAAAA,EAAe,CAMjD,GAAAC,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAC,IAAA,EAACC,MAAAA,WAAI,aACU,IACVlB,KAAcG,IAAdH,EAA0B,UAAYA,EAAY,MAAQ,IAAI,IAEnE,GAAAgB,EAAAC,IAAA,EAACC,MAAAA,WACG,GAAAF,EAAAG,GAAA,EAACC,EAAAA,CAAaA,CAAAA,CACVC,SAAU,CAACd,EAAAA,CAAAA,CAAAA,OAAoB,CAC/Be,QAASlB,WACZ,kBAGD,GAAAY,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACrB,EACXsB,QAASX,WACZ,WAGD,GAAAK,EAAAG,GAAA,EAACI,EAAAA,CAAaA,CAAAA,CACVF,SAAU,CAACrB,EACXsB,QAASR,WACZ,kBAzBF,GAAAE,EAAAG,GAAA,EAACD,MAAAA,UAAI,uDACf,AA8BL","sources":["webpack://_N_E/?6e16","webpack://_N_E/./src/pages/audio.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/audio\",\n      function () {\n        return require(\"private-next-pages/audio.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/audio\"])\n      });\n    }\n  ","import { DefaultButton, PrimaryButton } from \"@fluentui/react\";\nimport { AdbWebUsbBackend } from \"@yume-chan/adb-backend-webusb\";\nimport {\n    aoaGetProtocol,\n    aoaSetAudioMode,\n    aoaStartAccessory,\n} from \"@yume-chan/aoa\";\nimport { observer } from \"mobx-react-lite\";\nimport { useCallback, useState } from \"react\";\nimport { GLOBAL_STATE } from \"../state\";\n\nfunction AudioPage() {\n    const [supported, setSupported] = useState<boolean | undefined>(undefined);\n    const handleQuerySupportClick = useCallback(async () => {\n        const backend = GLOBAL_STATE.backend as AdbWebUsbBackend;\n        const device = backend.device;\n        const version = await aoaGetProtocol(device);\n        setSupported(version >= 2);\n    }, []);\n\n    const handleEnableClick = useCallback(async () => {\n        const backend = GLOBAL_STATE.backend as AdbWebUsbBackend;\n        const device = backend.device;\n        const version = await aoaGetProtocol(device);\n        if (version < 2) {\n            return;\n        }\n        await aoaSetAudioMode(device, 1);\n        await aoaStartAccessory(device);\n    }, []);\n    const handleDisableClick = useCallback(async () => {\n        const backend = GLOBAL_STATE.backend as AdbWebUsbBackend;\n        const device = backend.device;\n        const version = await aoaGetProtocol(device);\n        if (version < 2) {\n            return;\n        }\n        await aoaSetAudioMode(device, 0);\n        await aoaStartAccessory(device);\n    }, []);\n\n    if (\n        !GLOBAL_STATE.backend ||\n        !(GLOBAL_STATE.backend instanceof AdbWebUsbBackend)\n    ) {\n        return <div>Audio forward can only be used with WebUSB backend.</div>;\n    }\n\n    return (\n        <div>\n            <div>\n                Supported:{\" \"}\n                {supported === undefined ? \"Unknown\" : supported ? \"Yes\" : \"No\"}\n            </div>\n            <div>\n                <PrimaryButton\n                    disabled={!GLOBAL_STATE.backend}\n                    onClick={handleQuerySupportClick}\n                >\n                    Query Support\n                </PrimaryButton>\n                <DefaultButton\n                    disabled={!supported}\n                    onClick={handleEnableClick}\n                >\n                    Enable\n                </DefaultButton>\n                <DefaultButton\n                    disabled={!supported}\n                    onClick={handleDisableClick}\n                >\n                    Disable\n                </DefaultButton>\n            </div>\n        </div>\n    );\n}\n\nexport default observer(AudioPage);\n"],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","observer","supported","setSupported","useState","undefined","handleQuerySupportClick","useCallback","backend","GLOBAL_STATE","device","version","aoaGetProtocol","handleEnableClick","aoaSetAudioMode","aoaStartAccessory","handleDisableClick","AdbWebUsbBackend","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","jsx","PrimaryButton","disabled","onClick","DefaultButton"],"sourceRoot":""}